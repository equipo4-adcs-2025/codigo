openapi: 3.0.0
info:
  title: Resume Builder API
  description: API for managing users, roles, permissions, and skill catalog.
  version: 1.0.0
  contact:
    name: Resume Builder Team
    email: a01796323@tec.mx
  license:
    name: MIT
    url: https://opensource.org/licenses/MIT
servers:
  - url: http://localhost:8080
    description: Local Server
security:
  - bearerAuth: []

paths:
  # User Management
  /users:
    post:
      summary: Create a new user
      description: Creates a new user
      operationId: createUser
      tags: [Users]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/NewUserRequestBody'
      responses:
        '201':
          description: User created
        '400':
          description: Bad request

  /users/{userId}:
    get:
      summary: Get user by ID
      description: Placeholder for retrieving user details
      operationId: getUserById
      tags: [Users]
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: User found
        '401':
          description: Unauthorized - Authentication is required or token is invalid/expired
        '403':
          description: Forbidden - User does not have permission to access this resource
        '404':
          description: User not found

    put:
      summary: Update user (full)
      description: Replaces the entire user resource
      operationId: updateUser
      tags: [Users]
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateUserRequestBody'
      responses:
        '200':
          description: User updated
        '400':
          description: Bad request
        '404':
          description: User not found

    patch:
      summary: Update user (partial)
      description: Updates one or more fields of the user resource
      operationId: patchUser
      tags: [Users]
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PartialUpdateUserRequestBody'
      responses:
        '200':
          description: User partially updated
        '400':
          description: Bad request
        '404':
          description: User not found

    delete:
      summary: Delete user
      description: Deletes a user by ID
      operationId: deleteUser
      tags: [Users]
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: string
      responses:
        '204':
          description: User deleted successfully
        '404':
          description: User not found

  /auth/login:
    post:
      summary: User login
      description: Authenticates a user and returns a token
      operationId: loginUser
      tags: [Authorization]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LoginRequestBody'
      responses:
        '200':
          description: Login successful
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AuthTokenResponse'
        '401':
          description: Invalid credentials

  /users/{userId}/profiles:
    get:
      summary: List profiles for user
      description: Retrieves all profiles associated with a specific user
      operationId: listProfilesForUser
      tags: [UserProfiles]
      parameters:
        - name: userId
          in: path
          required: true
          description: ID of the user
          schema:
            type: string
            format: binary
      responses:
        '200':
          description: Profiles found
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Profile'
        '401':
          description: Unauthorized - Authentication is required or token is invalid/expired
        '403':
          description: Forbidden - User does not have permission to access this resource
        '404':
          description: Profiles not found for user

  /users/{userId}/profiles/{profileId}:
    get:
      summary: Get user profile by ID
      description: Retrieves a specific profile that belongs to the specified user
      operationId: getUserProfileById
      tags: [UserProfiles]
      parameters:
        - name: userId
          in: path
          required: true
          description: ID of the user
          schema:
            type: string
            format: binary
        - name: profileId
          in: path
          required: true
          description: ID of the profile
          schema:
            type: string
            format: binary
      responses:
        '200':
          description: Profile found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Profile'
        '401':
          description: Unauthorized - Authentication is required or token is invalid/expired
        '403':
          description: Forbidden - User does not have permission to access this resource
        '404':
          description: Profile not found for user

  # Profile Management
  /profiles:
    get:
      summary: Get all profiles
      description: Retrieves all profiles across users
      operationId: getAllProfiles
      tags: [Profiles]
      responses:
        '200':
          description: List of profiles
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Profile'
        '401':
          description: Unauthorized - Authentication is required or token is invalid/expired
        '403':
          description: Forbidden - User does not have permission to access this resource

    post:
      summary: Create a new profile
      description: Creates a new profile that is linked to a user
      operationId: createProfile
      tags: [Profiles]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/NewProfileRequest'
      responses:
        '201':
          description: Profile created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Profile'
        '400':
          description: Bad request
        '401':
          description: Unauthorized - Authentication is required or token is invalid/expired
        '403':
          description: Forbidden - User does not have permission to access this resource
        '404':
          description: User not found

  /profiles/{profileId}:
    get:
      summary: Get profile by ID
      description: Retrieves a profile by its ID
      operationId: getProfileById
      tags: [Profiles]
      parameters:
        - name: profileId
          in: path
          required: true
          description: ID of the profile
          schema:
            type: string
            format: binary
      responses:
        '200':
          description: Profile found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Profile'
        '401':
          description: Unauthorized - Authentication is required or token is invalid/expired
        '403':
          description: Forbidden - User does not have permission to access this resource
        '404':
          description: Profile not found

    put:
      summary: Update profile by ID
      description: Fully updates a profile, including reassociating to a user if provided
      operationId: updateProfileById
      tags: [Profiles]
      parameters:
        - name: profileId
          in: path
          required: true
          description: ID of the profile
          schema:
            type: string
            format: binary
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateProfileRequest'
      responses:
        '200':
          description: Profile updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Profile'
        '400':
          description: Bad request
        '401':
          description: Unauthorized - Authentication is required or token is invalid/expired
        '403':
          description: Forbidden - User does not have permission to access this resource
        '404':
          description: Profile not found

    patch:
      summary: Partially update profile by ID
      description: Partially updates a profile while ensuring it remains linked to a user
      operationId: patchProfileById
      tags: [Profiles]
      parameters:
        - name: profileId
          in: path
          required: true
          description: ID of the profile
          schema:
            type: string
            format: binary
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PartialUpdateProfileRequest'
      responses:
        '200':
          description: Profile updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Profile'
        '400':
          description: Bad request
        '401':
          description: Unauthorized - Authentication is required or token is invalid/expired
        '403':
          description: Forbidden - User does not have permission to access this resource
        '404':
          description: Profile not found

    delete:
      summary: Delete profile by ID
      description: Deletes a profile by its ID
      operationId: deleteProfileById
      tags: [Profiles]
      parameters:
        - name: profileId
          in: path
          required: true
          description: ID of the profile
          schema:
            type: string
            format: binary
      responses:
        '204':
          description: Profile deleted successfully
        '401':
          description: Unauthorized - Authentication is required or token is invalid/expired
        '403':
          description: Forbidden - User does not have permission to access this resource
        '404':
          description: Profile not found

  # Role Management
  /roles:
    get:
      summary: Get all roles
      description: Placeholder for retrieving all roles
      operationId: getAllRoles
      tags: [Roles]
      responses:
        '200':
          description: List of roles
        '401':
          description: Unauthorized - Authentication is required or token is invalid/expired
        '403':
          description: Forbidden - User does not have permission to access this resource

    post:
      summary: Create a new role
      description: Placeholder for role creation
      operationId: createRole
      tags: [Roles]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Role'
      responses:
        '201':
          description: Role created
        '400':
          description: Bad request
        '401':
          description: Unauthorized - Authentication is required or token is invalid/expired
        '403':
          description: Forbidden - User does not have permission to access this resource
  /roles/{roleId}:
    get:
      summary: Get role by ID
      description: Placeholder for retrieving role details
      operationId: getRoleById
      tags:
        - Roles
      security:
        - bearerAuth: []
      parameters:
        - name: roleId
          in: path
          required: true
          description: ID of the role
          schema:
            type: string
      responses:
        '200':
          description: Role found
        '401':
          description: Unauthorized - Authentication is required or token is invalid/expired
        '403':
          description: Forbidden - User does not have permission to access this resource
        '404':
          description: Role not found
    put:
      summary: Update role by ID
      description: Placeholder for updating role
      operationId: fullUpdateRoleById
      tags: [Roles]
      parameters:
        - name: roleId
          in: path
          required: true
          description: ID of the role
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Role'
      responses:
        '200':
          description: Role updated
        '400':
          description: Bad request
        '401':
          description: Unauthorized - Authentication is required or token is invalid/expired
        '403':
          description: Forbidden - User does not have permission to access this resource

    delete:
      summary: Delete role by ID
      description: Placeholder for deleting role
      operationId: deleteRoleById
      tags: [Roles]
      parameters:
        - name: roleId
          in: path
          required: true
          description: ID of the role
          schema:
            type: string
      responses:
        '204':
          description: Role deleted
        '401':
          description: Unauthorized - Authentication is required or token is invalid/expired
        '403':
          description: Forbidden - User does not have permission to access this resource
        '404':
          description: Role not found
  # Skills Category
  /skills/categories:
    get:
      summary: Get all skill categories
      description: Retrieves all skills categories available in the catalog
      operationId: getAllSkillCategories
      tags: [SkillCategoryCatalog]
      responses:
        '200':
          description: List of skill categories
        '401':
          description: Unauthorized - Authentication is required or token is invalid/expired
        '403':
          description: Forbidden - User does not have permission to access this resource

    post:
      summary: Create a new skill category
      description: Placeholder for skill category creation
      operationId: createSkillCategory
      tags: [SkillCategoryCatalog]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SkillCategory'
      responses:
        '201':
          description: Skill category created
        '400':
          description: Bad request
        '401':
          description: Unauthorized - Authentication is required or token is invalid/expired
        '403':
          description: Forbidden - User does not have permission to access this resource
  /skills/categories/{skillCategoryId}:
    get:
      summary: Get skill category by ID
      description: Retrieves a specific skill category by its ID
      operationId: getSkillCategoryById
      tags: [SkillCategoryCatalog]
      parameters:
        - name: skillCategoryId
          in: path
          required: true
          description: ID of the skill
          schema:
            type: string
            format: binary
      responses:
        '200':
          description: Skill Category found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SkillCategory'
        '401':
          description: Unauthorized - Authentication is required or token is invalid/expired
        '403':
          description: Forbidden - User does not have permission to access this resource
        '404':
          description: Skill Category not found
    put:
      summary: Update skill category
      description: Placeholder for updating skill category
      operationId: fullUpdateSkillCategory
      tags: [SkillCategoryCatalog]
      parameters:
        - name: skillCategoryId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SkillCategory'
      responses:
        '200':
          description: Skill category 
        '401':
          description: Unauthorized - Authentication is required or token is invalid/expired
        '403':
          description: Forbidden - User does not have permission to access this resource
        '404':
          description: Category not found
    delete:
      summary: Delete  Skill Category by ID
      description: Deletes a skill Category from the catalog
      operationId: deleteSkillCategoryById
      tags: [SkillCategoryCatalog]
      parameters:
        - name: skillCategoryId
          in: path
          required: true
          description: ID of the skill Category to delete
          schema:
            type: string
      responses:
        '204':
          description: Skill Category deleted successfully
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Skill Category not found
  # Skills
  /skills:
    get:
      summary: Get all skills
      description: Retrieves all skills available in the catalog
      operationId: getAllSkills
      tags: [SkillCatalog]
      responses:
        '200':
          description: List of all skills
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Skill'
        '401':
          description: Unauthorized - Authentication is required or token is invalid/expired
        '403':
          description: Forbidden - User does not have permission to access this resource

    post:
      summary: Create a new skill
      description: Adds a new skill to the catalog and links it to an existing skill category
      operationId: createSkill
      tags: [SkillCatalog]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Skill'
      responses:
        '201':
          description: Skill created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Skill'
        '400':
          description: Bad request - Invalid data or missing required fields
        '401':
          description: Unauthorized - Authentication is required or token is invalid/expired
        '403':
          description: Forbidden - User does not have permission to access this resource

  /skills/{skillId}:
    get:
      summary: Get skill by ID
      description: Retrieves details of a specific skill using its unique ID
      operationId: getSkillById
      tags: [SkillCatalog]
      parameters:
        - name: skillId
          in: path
          required: true
          description: ID of the skill to retrieve
          schema:
            type: string
      responses:
        '200':
          description: Skill found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Skill'
        '401':
          description: Unauthorized - Authentication is required or token is invalid/expired
        '403':
          description: Forbidden - User does not have permission to access this resource
        '404':
          description: Skill not found

    put:
      summary: Update skill by ID
      description: Updates the skillâ€™s name or its associated category
      operationId: updateSkillById
      tags: [SkillCatalog]
      parameters:
        - name: skillId
          in: path
          required: true
          description: ID of the skill to update
          schema:
            type: string
            format: binary
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Skill'
      responses:
        '200':
          description: Skill updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Skill'
        '400':
          description: Bad request - Invalid data
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Skill not found

    delete:
      summary: Delete skill by ID
      description: Deletes a skill from the catalog permanently
      operationId: deleteSkillById
      tags: [SkillCatalog]
      parameters:
        - name: skillId
          in: path
          required: true
          description: ID of the skill to delete
          schema:
            type: string
            format: binary
      responses:
        '204':
          description: Skill deleted successfully
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
        '404':
          description: Skill not found
            
  # Permissions
  /permissions:
    get:
      summary: Get permissions
      description: Get all permissions
      operationId: getAllPermissions
      tags: [Permissions]
      responses:
        '200':
          description: List of permissions
        '401':
          description: Unauthorized - Authentication is required or token is invalid/expired
        '403':
          description: Forbidden - User does not have permission to access this resource
    post:
      summary: Create new permission
      description: Create a new permission
      operationId: createPermission
      tags: [Permissions]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Permission'
      responses:
        '200':
          description: Permission created
        '400':
          description: Bad request
        '401':
          description: Unauthorized - Authentication is required or token is invalid/expired
        '403':
          description: Forbidden - User does not have permission to access this resource

  /permissions/{permissionId}:
    delete:
      summary: Delete a permission
      description: Delete a specific permission
      operationId: deletePermissionByPermissionId
      tags: [Permissions]
      parameters:
        - name: permissionId
          in: path
          required: true
          schema:
            type: string      
      responses:
        '200':
          description: Permission deleted
        '400':
          description: Bad request
        '403':
          description: Forbidden - User does not have permission to access this resource
          
components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
  schemas:
    NewUserRequestBody:
      type: object
      description: Represents the information needed to create a new user
      properties:
        email:
          type: string
          format: email
        password:
          type: string
        firstName:
          type: string
        lastName:
          type: string
        title:
          type: string
        country:
          type: string
        practice:
          type: string
        lanId:
          type: string
      required: [firstName, lastName, email, password]

    Role:
      type: object
      description: Placeholder for role schema
      properties:
        roleName:
          type: string
        displayName:
          type: string
        description:
          type: string
        permissions:
          type: array
          items:
            type: object
            properties:
              name:
                type: string
      required: [roleName, displayName]

    SkillCategory:
      type: object
      description: Represents a category that groups related skills within the skill catalog, each category defines a logical grouping of skills.
      properties:
        skillCategoryId:
          type: string
          description: Unique identifier for the skill category
        skillCategoryName:
          type: string
          description: Name of the skill category
        display_order:
          type: integer
          description: Order use to display the category
      required: [skillCategoryId, skillCategoryName, display_order]

    Skill:
      type: object
      description: Represents an individual skill that belongs to a specific skill category. Each skill defines a concrete capability or technology (e.g., Python, Java, Leadership) and is linked to a category for logical organization within the skill catalog.
      properties:
        skillId:
          type: string
          description: Unique identifier for the skill
        skillCategoryId:
          type: string
          description: Reference to the skill category
        skillName:
          type: string
          description: Name of the skill
      required: [skillId, skillCategoryId, skillName]

    Permission:
      type: object
      description: Placeholder for permission schema
      properties:
        id:
          type: string
        name:
          type: string
        display_name:
          type: string
        description:
          type: string
        creation_date:
          type: string
          format: date-time
        enabled:
          type: boolean
      required: [name, display_name, description]

    Profile:
      type: object
      description: Represents a user profile; users can be associated with multiple profiles and every profile belongs to a user
      properties:
        profileId:
          type: string
          format: binary
          description: Unique identifier for the profile (BINARY(16))
        userId:
          type: string
          format: binary
          description: Reference to the user (BINARY(16))
        profileSummary:
          type: string
          description: Summary or description of the profile
      required: [profileId, userId]

    NewProfileRequest:
      type: object
      description: Request body for creating a new profile associated with a user
      properties:
        userId:
          type: string
          format: binary
          description: ID of the user this profile belongs to
        profileSummary:
          type: string
          description: Summary or description of the profile
      required: [userId, profileSummary]

    UpdateProfileRequest:
      type: object
      description: Request body for fully updating a profile while maintaining its user association
      properties:
        userId:
          type: string
          format: binary
          description: ID of the user this profile belongs to
        profileSummary:
          type: string
          description: Summary or description of the profile
      required: [userId, profileSummary]

    PartialUpdateProfileRequest:
      type: object
      description: Request body for partially updating a profile; userId may be supplied to reassign the profile
      properties:
        userId:
          type: string
          format: binary
          description: ID of the user this profile belongs to
        profileSummary:
          type: string
          description: Summary or description of the profile
    LoginRequestBody:
      type: object
      required:
        - username
        - password
      properties:
        username:
          type: string
          example: johndoe
        password:
          type: string
          format: password
          example: mySecurePassword123

    AuthTokenResponse:
      type: object
      properties:
        accessToken:
          type: string
          description: JWT access token
          example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
        tokenType:
          type: string
          example: Bearer
        expiresIn:
          type: integer
          description: Token expiration time in seconds
          example: 3600

    UpdateUserRequestBody:
      type: object
      required:
        - username
        - email
        - roles
      properties:
        username:
          type: string
          example: johndoe
        email:
          type: string
          format: email
          example: johndoe@example.com
        fullName:
          type: string
          example: John Doe
        isActive:
          type: boolean
          example: true
        roles:
          type: array
          items:
            type: string
          example: ["USER", "ADMIN"]

    PartialUpdateUserRequestBody:
      type: object
      description: Fields to update in the user resource
      properties:
        username:
          type: string
          example: johndoe_updated
        email:
          type: string
          format: email
          example: newemail@example.com
        fullName:
          type: string
          example: Johnathan Doe
        isActive:
          type: boolean
          example: false
        roles:
          type: array
          items:
            type: string
          example: ["USER"]
tags:
  - name: Authorization
    description: Endpoints for user authentication and token management
  - name: Permissions
    description: Endpoints for permission management
  - name: Profiles
    description: Endpoints for profile management
  - name: Roles
    description: Endpoints for role management
  - name: SkillCatalog
    description: Endpoints for skill category management
  - name: SkillCategoryCatalog
    description: Endpoints for skill Catalog category management
  - name: UserProfiles
    description: Endpoints for access to user profiles
  - name: Users
    description: Endpoints for user management
